<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <link rel="manifest" href="/pwa-sikhgame/manifest.json">

    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Price List">
    <meta name="apple-mobile-web-app-title" content="Price List">
    <meta name="theme-color" content="#FFA500">
    <meta name="msapplication-navbutton-color" content="#FFA500">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="msapplication-starturl" content="/index.html">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <link rel="icon" type="image/png" sizes="192x192" href="PriceList.png">
    <link rel="apple-touch-icon" type="image/png" sizes="192x192" href="PriceList.png">

    <title>Sikh Games</title>
    <link rel="stylesheet" type="text/css" href="bulma.min.css" media="all">
    <link rel="stylesheet" type="text/css" href="index.css" media="all">
    <script src="vue.js"></script>
</head>
<body>
    <div id='app'>
        <nav class="navbar is-warning" role="navigation" aria-label="main navigation">
            <div class="navbar-start">
                <div class="navbar-item">
                    <div class="field is-grouped">
                        <p class='control'>
                            <img src='SikhGame.png' alt="Sikh Games: Get totals for samosa and spring roll sales">
                        </p>
                        <p class='control'>
                            <span class='is-size-5'>Sikh Games</span>
                        </p>
                        <p class="control">
                            <span class='is-size-5'></span>
                        </p>
                        <p class="control">
                            <img @click='share' src='share.png' height='10px' />
                        </p>
                    </div>
                </div>
                
            </div>
        </nav>
        <div v-if='gameInProgress' class='section'>
            <div class='content is-large'>
                <h1>{{currentProcessedAnswer}}</h1>
            </div>
            <div>
                <h2>Selected Letters</h2>
                <a class='button is-black' v-for='lt in selectedLetters'>{{lt}}</a>
            </div>
            <a class='button is-white' @click='addSelectedLetter(akhar)' v-for='(akhar, index) in gurmukhiLetters'>
                {{akhar}}
            </a>
        </div>
        <div v-else class='section'>
            <a @click='startGame' class='button is-success is-outlined'>Start Hangman</a>
        </div>
    </div>
</body>
<script>
    Vue.filter('currency', function (value) {
        return '£' + parseFloat(value).toFixed(2);
    });

    var app = new Vue({
    el: '#app',
    data: {
        hangmanAnswers: [
            {answer: 'ਸਿੱਖੀ', clues:['5th largest religion in the world'], tags:''},
            {answer: 'ਬੰਦਾ ਸਿੰਘ ਬਹਾਦਰ', clues:['Known as Lakshmi Das'], tags:''}
        ],
        currentAnswer : null,
        currentClues: null,
        currentTags: null,
        selectedLetters: null,
        gameInProgress: false,
        gurmukhiLetters: ['ੳ', 'ਅ', 'ੲ', 'ਸ', 'ਹ',
                        'ਕ', 'ਖ', 'ਗ', 'ਘ', 'ਙ',
                        'ਚ', 'ਛ', 'ਜ', 'ਝ', 'ਞ',
                        'ਟ', 'ਠ', 'ਡ', 'ਢ', 'ਣ', 
                        'ਤ', 'ਥ', 'ਦ', 'ਧ', 'ਨ', 
                        'ਪ', 'ਫ', 'ਬ', 'ਭ', 'ਮ', 
                        'ਯ', 'ਰ', 'ਲ', 'ਵ', 'ੜ', 
                        'ਸ਼', 'ਖ਼', 'ਗ਼', 'ਜ਼', 'ਫ਼', 
                        'ਲ਼', '਼', 'ਾ', 'ਿ', 'ੀ', 
                        'ੁ', 'ੂ', 'ੇ', 'ੈ', 'ੋ', 
                        'ੌ', '੍', 'ੰ', 'ੱ' 
                    ]
    },
    methods: {
        startGame: function(){
            this.gameInProgress = true;
            this.currentAnswer = this.hangmanAnswers[0].answer;
            this.currentClues = this.hangmanAnswers[0].clues;
            this.currentTags = this.hangmanAnswers[0].tags;
            this.selectedLetters = [];
        },
        share: function(){

            if ('share' in navigator) {
                navigator.share({
                    title: 'Sikh Game Total: ',
                    text: '',
                    url: location.href
                })
            }
            else{
                alert('Share not available');
            }
        },
        addSelectedLetter: function(_letter){
            this.selectedLetters.push(_letter);
        }
    },
    computed:{
        currentProcessedAnswer: function(){
            var processed = [];
            for(i=0; i<this.currentAnswer.length; i++) {
                if(this.selectedLetters.indexOf(this.currentAnswer[i]) > -1 ){
                    processed.push(this.currentAnswer[i]);
                }
                else{
                    processed.push('_');
                }
            }         
            return processed.join('');
        }
    },
    watcher:{}
});
</script>

<script>
    if('serviceWorker' in navigator) {
        navigator.serviceWorker
                .register('/pwa-sikhgame/sw.js')
                .then(function() { console.log("Service Worker Registered"); });
    }
</script>
        
</html>

